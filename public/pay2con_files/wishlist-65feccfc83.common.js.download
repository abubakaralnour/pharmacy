window.Ssw||(window.Ssw={}),window.Ssw.wishlist={instances:{}},setTimeout((()=>{document.dispatchEvent(new Event("SSW_WISHLIST_COMMON_LOADED",{bubbles:!0}))}),0);
void 0===window.sswLangs&&(window.sswLangs={data:{},add:function(n,t){this.data[n]=t},t:function(n,t){var i=this.data[n]||n;return i=i&&i.indexOf("translation missing:")<0?i:n,t&&(i=i.replace(/\{\{\s?(\w+)\s?\}\}/g,(function(n,i){return void 0!==t[i]?t[i]:n}))),i},p:function(n,t,i,s){return 1===i?this.t(n,s):this.t(t,s)}});
!function(){var s=null;class i{static instancePromise=new Promise(((i,e)=>{s=i}));constructor(){s(this)}loadMain(){return Promise.all([Ssw.gwAssetsManifestLoader.requireByKey("wishlist.main.js","SCRIPT"),Ssw.gwAssetsManifestLoader.requireByKey("wishlist.main.css","STYLE")])}}Ssw.wishlist.WishlistAssetsLoader=i,Ssw.wishlist.instances.wishlistAssetsLoader=new i}();
!function(){var n=null,s=new Promise((function(s,t){n=s}));function t(s){this._$=s,n(this)}t.prototype.getInstance=function(){return this._$},t.instancePromise=s,Ssw.wishlist.WishlistJqueryLocator=t,sswRun((function(n){Ssw.wishlist.instances.wishlistJqueryLocator=new t(n)}))}();
!function(){let t=null;const i=new Promise((function(i,n){t=i}));function n(i){this.options=i,t(this);const n=["input[name=id]","select[name^=id]","input[name^=id]:checked","hidden[name^=id]"];this.getVariantId=function(t){return this.form=t,this.getSelectorValue(),this.variantId||this.getVariantIdAdditional(),this.variantId},this.getFirstVariantId=function(){return window.ShopifyAnalytics?.meta?.product?.variants[0]?.id},this.getSelectorValue=function(){const t=n.find((t=>this.form.find(t).length));this.variantId=ssw(this.form).find(t).val()},this.getVariantIdAdditional=function(){let t;const i=window.ShopifyAnalytics?.meta?.selectedVariantId,n=new URL(window.location.href).searchParams.get("variant");(i||n)&&(t=i||n),this.variantId=t}}n.instancePromise=i,Ssw.wishlist.WishlistOptionsManager=n}();
!function(){var t=null,a=new Promise((function(a,s){t=a}));function s(){this.lists=[sswLangs.t("favelist_default")],this.faveCount=0,this.data=JSON.parse(localStorage.getItem("ssw-wishlist")),t(this)}s.instancePromise=a,s.prototype.init=function(){return this._load(),this},s.prototype["/lite2/fave-list-delete"]=function(t,a,s){try{for(var i in this.data)this.data.hasOwnProperty(i)&&this.data[i].favelist_id==t.favelist_id&&delete this.data[i];this._save(),a({status:1,fave_count:this.faveCount})}catch(t){this._load(),s({status:0,fave_count:this.faveCount})}},s.prototype["/lite2/fave-list-create"]=function(t,a,s){var i=this;try{this.lists.push(t.title),this._save(),a({status:1,fave_count:i.faveCount,favelist_id:i.lists.length-1})}catch(t){this._load(),s({status:0,fave_count:i.faveCount})}},s.prototype["/lite2/fave-list-rename"]=function(t,a,s){try{for(var i in this.lists[t.favelist_id]=t.title,this.data)if(this.data.hasOwnProperty(i))if(Ssw.wishlist.instances.wishlistListsManager.settings.fave_with_variant)for(var e in this.data[i])this.data[i].hasOwnProperty(e)&&this.data[i][e].favelist_id==t.favelist_id&&(this.data[i][e].list_title=t.title);else this.data[i].favelist_id==t.favelist_id&&(this.data[i].list_title=t.title);this._save(),a({status:1,fave_count:this.faveCount,favelist_id:t.favelist_id})}catch(t){this._load(),s({status:0,fave_count:this.faveCount})}},s.prototype["/lite2/fave-move-to-list"]=function(t,a,s){try{for(var i=t.product_ids.length,e=t.variant_id||0,n=0;n<i;n++){var l=t.product_ids[n];Ssw.wishlist.instances.wishlistListsManager.settings.fave_with_variant?this.data[l][e]&&(this.data[l][e].favelist_id=parseInt(t.favelist_id),this.data[l][e].list_title=t.title?t.title:sswLangs.t("untitled_favelist")):this.data[l]&&(this.data[l].favelist_id=parseInt(t.favelist_id),this.data[l].list_title=t.title?t.title:sswLangs.t("untitled_favelist"))}this._save(),a({status:1,fave_count:this.faveCount})}catch(t){this._load(),s({status:0,fave_count:this.faveCount})}},s.prototype._save=function(){try{return this._updateCount(),this.data&&localStorage.setItem("ssw-wishlist",JSON.stringify(this.data)),1}catch(t){return 0}},s.prototype._load=function(){return this.data=JSON.parse(localStorage.getItem("ssw-wishlist")),this._updateCount(),this.data},s.prototype._updateCount=function(){for(var t in this.faveCount=0,this.data)this.data.hasOwnProperty(t)&&(Ssw.wishlist.instances.wishlistListsManager.settings.fave_with_variant?"object"==typeof this.data[t]&&(this.faveCount+=this.data[t].length):++this.faveCount,this.lists[this.data[t].favelist_id]||(this.lists[this.data[t].favelist_id]=this.data[t].list_title));return this.faveCount},s.prototype.clear=function(t){let a=[];for(var s in localStorage)localStorage.hasOwnProperty(s)&&s.search(new RegExp(t,"i"))>-1&&(localStorage.removeItem(s),a.push(s));ssw(document).trigger("onCacheInvalidated",[a])},s.prototype.setCache=function(t,a,s,i){var e=t;a&&(e+=sswMd5(JSON.stringify(a))),i||(i=36e5),localStorage.setItem(e,JSON.stringify({time:(new Date).getTime()+i,value:s}))},s.prototype.getCache=function(t,a){var s=t;a&&(s+=sswMd5(JSON.stringify(a)));var i=null;try{var e=JSON.parse(localStorage.getItem(s));e&&e.value&&e.time>(new Date).getTime()?i=e.value:localStorage.removeItem(s)}catch(t){i=null}return i},Ssw.wishlist.WishlistCacheManager=s,Ssw.wishlist.instances.wishlistCacheManager=new s}();
!function(){var s="ssw-faves-lists",e=null,i=new Promise((function(s,i){e=s})),t=null,n=new Promise((function(s,e){t=s})),o=null,r=new Promise((function(s,e){o=s}));function a(s,i,t){this._$=s,this._cacheManager=i,this.options=t,this.settings=null,e(this)}a.instancePromise=i,a.settingsPromise=n,a.permissionsPromise=r,a.prototype.getFromCache=function(){return this._cacheManager.getCache(s)},a.prototype.getFromApi=function(){const s=JSON.parse(localStorage.getItem("gw_has_guest_wishlist_items"))??!0,e=new URLSearchParams;return e.append("_sid",ssw.cookie("hesid")),e.append("hash_key",ssw.cookie("hash_key")),e.append("has_guest_wishlist_items",s),fetch(`${sswProxyUrl}/lite2/faves-lists?${e.toString()}`).then((s=>s.json())).then((s=>{window.Shopify.currency.rate;if(s.faves)for(let e=0;e<s.faves.length;e++)window.localStorage.removeItem("sswproduct_"+s.faves[e].product_id),window.localStorage.removeItem("ssw-faves-lists");return s}))},a.prototype.saveSettings=function(s){this.settings={...this.settings,...s.settings},t(this.settings)},a.prototype.savePermissions=function(s){this.permissions={...this.permissions,...s.permissions},o(this.permissions)},a.prototype.getFavesList=function(e){var i=this;return new Promise((function(t,n){var o=i.options.is_from_email?null:i.getFromCache();o?(i.saveSettings(o),i.savePermissions(o),e&&e(o),t(o)):i.getFromApi().then((function(n){i.saveSettings(n),i.savePermissions(n),window.gwDisableWishlistCache||i._cacheManager.setCache(s,null,n,864e5),e&&e(n),t(o)}))}))},Ssw.wishlist.WishlistListsManager=a,Promise.all([Ssw.wishlist.WishlistCacheManager.instancePromise,Ssw.wishlist.WishlistJqueryLocator.instancePromise]).then((function(s){Ssw.wishlist.instances.wishlistListsManager=new a(s[1],s[0],{})}))}();
!function(){const s=sswProxyUrl+"/lite2/feed/getFaves",t=sswProxyUrl+"/lite2/fave-count";var e=null,a=new Promise((function(s,t){e=s}));class i{static instancePromise=a;constructor(s){this.wishlistCacheManager=s,this.getFaves=this.getFaves.bind(this),e(this)}utils={debounce:function(s,t){let e=null;return function(){clearTimeout(e),e=setTimeout((()=>{s.apply(this,arguments)}),t)}}};findAllProductIds(){var s=[];return ssw(".ssw-faveiticon > .ssw-fave-icon.ssw-wishlist-element.ssw-not-synch:lt(100), .ssw-fave-btn.ssw-wishlist-element.ssw-not-synch:lt(100)").each((function(t,e){ssw(this).removeClass("ssw-not-synch"),s.push(ssw(this).data("product-id"))})),s}updateFavesOnPage(s,t){let e,a=parseInt(t.fave_with_variant)||0,i=t.fave_multiple_variant||0;for(let c=0;c<s.length;c++){if(e=s[c],ssw(`.sswfaveicon${e} .ssw-fave-icon, .sswfavebtn${e}`).removeClass("ssw-not-synch"),void 0!==t.products_info&&void 0!==t.products_info[e]){var n={};ssw(`.sswfaveicon${e} .ssw-fave-icon`).length?n=ssw(`.sswfaveicon${e} .ssw-fave-icon`).data("params"):ssw(`.sswfavebtn${e}`).length&&(n=ssw(`.sswfavebtn${e}`).data("params")),n=ssw.extend({},n,t.products_info[e]),ssw(`.sswfaveicon${e} .ssw-fave-icon, .sswfavebtn${e}`).data("params",n),ssw(`.sswfaveicon${e} .ssw-fave-icon, .sswfavebtn${e}`).attr("data-params",JSON.stringify(n))}var o=!1;if(a){if(void 0!==t.products_info&&void 0!==t.products_info[e]){var w=void 0!==t.products_info[e].first_variant_id?t.products_info[e].first_variant_id:0,v=void 0!==t.viewer_faves[e]?t.viewer_faves[e]:{};(o=void 0!==v[w])||(o=void 0!==v[0]),o||i||void 0===t.viewer_faves[e]||(o=!0),ssw(`.sswfaveicon${e} .ssw-fave-icon, .sswfavebtn${e}`).attr("data-variant-id",w)}}else o=void 0!==t.viewer_faves[e];if(void 0!==t.product_faves[e]&&0!==t.product_faves[e]){a&&w&&(v[w]=1);let s=ssw(`.sswfaveicon${e}`),i=ssw(`.sswfavebtn${e}`);if(o)s.find(a?`.ssw-fave-icon[data-variant-id="${w}"]`:".ssw-fave-icon").removeClass("ssw-icon-heart-o").addClass("ssw-icon-heart").attr("title",sswLangs.t("unfave")),ssw(`.sswfavebtn${e}[data-variant-id="${w}"]`).addClass("ssw-active").html('<div class="ssw-fave-btn-content"><i class="ssw-icon-heart"></i>'+sswLangs.t("faved")+'</div><div class="ssw-fave-btn-counter">'+ssw(".sswfavebtn"+e+'[data-variant-id="'+w+'"]').attr("data-count")+"</div>");else{let s=i.attr("data-count");i.html('<div class="ssw-fave-btn-content"><i class="ssw-icon-heart-o"></i>'+sswLangs.t("fave")+'</div><div class="ssw-fave-btn-counter">'+s+"</div>")}ssw(`.sswfaveicon${e} .ssw-fave-icon, .sswfavebtn${e}`).attr("data-count",t.product_faves[e]),t.product_faves[e]&&(s.find(".faves-count").html(t.product_faves[e]),i.find(".ssw-fave-btn-counter").html(t.product_faves[e])),ssw(".ssw-faveappbtn.ssw-wishlist-element").removeClass("ssw-faveappbtn-hidden-count")}else ssw(`.sswfaveicon${e} .ssw-fave-icon, .sswfavebtn${e}`).attr("data-count",0),ssw(`.sswfaveicon${e} .faves-count`).html("");a&&ssw(`.sswfaveicon${e} .faves-count, .sswfavebtn${e}`).attr("data-user-faves",JSON.stringify(v)),ssw(`.sswfaveicon${e} .ssw-fave-icon, .sswfavebtn${e}`).addClass("ssw-synchronized")}window._sswFaveNotSync=!0}getFaves(){const t=JSON.parse(localStorage.getItem("gw_has_guest_wishlist_items"))??!0,e=this.findAllProductIds(),a={ids:e.join("I"),_sid:ssw.cookie("hesid"),hash_key:ssw.cookie("hash_key"),has_guest_wishlist_items:t};var i=this.wishlistCacheManager.getCache(s,a);i?this.updateFavesOnPage(e,i):ssw.post(s,a,(t=>{window.gwDisableWishlistCache||this.wishlistCacheManager.setCache(s,a,t,36e7),this.updateFavesOnPage(e,t)}),"json")}getTotalCount(){if(!(JSON.parse(localStorage.getItem("gw_has_guest_wishlist_items"))??!0))return new Promise((s=>{s({count:0,login_enabled:1,list:{count:0,list_id:0}})}));const s={_sid:ssw.cookie("hesid"),hash_key:ssw.cookie("hash_key")};return new Promise(((e,a)=>{ssw.post(t,s,"json").done((s=>{e(s)})).fail((s=>{a(s.responseText)}))}))}bindActions(){ssw(document).on("onCacheInvalidated",((s,t)=>{JSON.stringify(t).search(/fave/gi)>-1&&this.getFaves()}));const s=this.utils.debounce(this.getFaves,500);window.addEventListener("ssw.faveicon.init",s)}updateFavesAfterFilter(){const s=document.getElementsByTagName("body")[0],t=this.utils.debounce(this.getFaves,500);new MutationObserver((function(s,e){for(const e of s)e&&t()})).observe(s,{attributes:!0})}}Ssw.wishlist.WishlistFavesCountManager=i,Promise.all([Ssw.wishlist.WishlistCacheManager.instancePromise,Ssw.wishlist.WishlistJqueryLocator.instancePromise]).then((([s])=>{Ssw.wishlist.instances.wishlistFavesCountManager=new i(s),Ssw.wishlist.instances.wishlistFavesCountManager.getFaves(),Ssw.wishlist.instances.wishlistFavesCountManager.bindActions(),Ssw.wishlist.instances.wishlistFavesCountManager.updateFavesAfterFilter()}))}();